import{g as B,a as S,b as W}from"./firm-32e4afcf.js";import{_ as C,d as $,F as v,r as c,j as z,x as g,m as i,o as h,b as L,e as o,g as l,a as n,t as r,c as k,f as V,q as _,k as T,N as F,s as j}from"./index-dd519aa6.js";const q=$({name:"CreateTasks",props:{dialogVisible:{type:Boolean,default:!1},tenantId:{type:Number,required:!0}},emits:["update:dialogVisible","update:tenantId"],setup(e,{emit:t}){const m=v({get:()=>e.dialogVisible,set:s=>t("update:dialogVisible",s)}),u=v({get:()=>e.tenantId,set:s=>t("update:tenantId",s)}),f=c({storeAddress:"",storeName:"",storeNumber:0,parentId:0,storeStatus:"",merchantId:0}),d=c({});z(()=>e.dialogVisible,s=>{s&&a()});const a=async()=>{try{d.value=await B(u.value)}catch(s){console.error(s),g.error("获取商户信息失败")}};return{syncDialogVisible:m,tenantIds:u,form:f,list:d,getMsgFromMers:a,ensureDialog:()=>{m.value=!1}}}}),E={key:0},O={key:1},R={slot:"footer",class:"dialog-footer"};function A(e,t,m,u,f,d){const a=i("el-form-item"),b=i("el-form"),s=i("el-button"),p=i("el-dialog");return h(),L(p,{title:"基本信息",visible:e.syncDialogVisible,onOpen:e.open},{default:o(()=>[l(b,{inline:!1},{default:o(()=>[l(a,{label:"姓名: ","label-width":e.formLabelWidth},{default:o(()=>[n("span",null,r(e.list.fullName),1)]),_:1},8,["label-width"]),l(a,{label:"最后一次登录时间","label-width":e.formLabelWidth},{default:o(()=>[n("span",null,r(e.list.lastLoginTime),1)]),_:1},8,["label-width"]),l(a,{label:"手机号: ","label-width":e.formLabelWidth},{default:o(()=>[n("span",null,r(e.list.mobile),1)]),_:1},8,["label-width"]),l(a,{label:"职位	: ","label-width":e.formLabelWidth},{default:o(()=>[n("span",null,r(e.list.position),1)]),_:1},8,["label-width"]),l(a,{label:"用户名:","label-width":e.formLabelWidth},{default:o(()=>[n("span",null,r(e.list.username),1)]),_:1},8,["label-width"]),l(a,{label:"联系人地址: ","label-width":e.formLabelWidth},{default:o(()=>[e.list.staffStatus?(h(),k("span",E,"启用")):V("",!0),e.list.staffStatus?V("",!0):(h(),k("span",O,"禁用"))]),_:1},8,["label-width"]),l(a,{label:"密码: :","label-width":e.formLabelWidth},{default:o(()=>[n("span",null,r(e.list.password),1)]),_:1},8,["label-width"])]),_:1}),n("div",R,[l(s,{type:"primary",onClick:e.ensureDialog},{default:o(()=>[...t[0]||(t[0]=[_("确 定",-1)])]),_:1},8,["onClick"])])]),_:1},8,["visible","onOpen"])}const U=C(q,[["render",A]]);const G=$({name:"Member",components:{MemberDetail:U},setup(){const e=c([]),t=c(1),m=c(10),u=c(!1),f=c(0),d=async()=>{try{const s=await S(t.value,m.value);e.value=s.items}catch(s){console.error(s),g.error("获取成员信息失败")}},a=s=>{u.value=!0,f.value=s.id},b=async s=>{try{await W(s.id)?(g({message:"删除成功",type:"success",duration:2*1e3}),d()):g({message:"删除失败",type:"error",duration:2*1e3})}catch(p){console.error(p),g.error("删除成员失败")}};return T(()=>{d()}),{list:e,pageNo:t,pageSize:m,dialogVisible:u,memberId:f,getList:d,searchClick:a,delClick:b}}}),H={class:"data-container"},J={"slot-scope":"scope"},K={"slot-scope":"scope"},P={"slot-scope":"scope"},Q={"slot-scope":"scope"};function X(e,t,m,u,f,d){const a=i("el-button"),b=i("el-row"),s=i("el-input"),p=i("el-form-item"),D=i("el-form"),w=i("el-table-column"),N=i("el-table"),I=i("memberDetail"),M=F("loading");return h(),k("div",H,[t[7]||(t[7]=n("h3",null,"门店管理",-1)),l(b,{type:"flex",justify:"end",class:"add"},{default:o(()=>[l(a,{type:"primary",size:"medium",onClick:e.openSkuDialog,id:"addBtn"},{default:o(()=>[...t[3]||(t[3]=[_("新增",-1)])]),_:1},8,["onClick"])]),_:1}),l(D,{inline:!0,size:"medium",class:"forms"},{default:o(()=>[l(p,{label:"账户/用户名:"},{default:o(()=>[l(s,{modelValue:e.skuName,"onUpdate:modelValue":t[0]||(t[0]=y=>e.skuName=y),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),l(p,null,{default:o(()=>[l(a,{type:"primary",onClick:e.searchSku,id:"searchBtn"},{default:o(()=>[...t[4]||(t[4]=[_("查询",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1}),j((h(),L(N,{data:e.list,fit:"","highlight-current-row":"","header-cell-style":{color:"#5373e0",background:"#f3f6fb"},style:{width:"100%"}},{default:o(()=>[l(w,{align:"center",label:"手机号"},{default:o(()=>[n("template",J,[n("span",null,r(e.scope.row.mobile),1)])]),_:1}),l(w,{align:"center",label:"用户名"},{default:o(()=>[n("template",K,[n("span",null,r(e.scope.row.username),1)])]),_:1}),l(w,{align:"center",label:"最后一次登录时间"},{default:o(()=>[n("template",P,[n("span",null,r(e.scope.row.lastLoginTime),1)])]),_:1}),l(w,{fixed:"right",label:"操作",width:"120",align:"center"},{default:o(()=>[n("template",Q,[l(a,{onClick:t[1]||(t[1]=y=>e.searchClick(e.scope.row)),type:"text",size:"small"},{default:o(()=>[...t[5]||(t[5]=[_("查看",-1)])]),_:1}),l(a,{onClick:t[2]||(t[2]=y=>e.delClick(e.scope.row)),type:"text",size:"small"},{default:o(()=>[...t[6]||(t[6]=[_("删除",-1)])]),_:1})])]),_:1})]),_:1},8,["data"])),[[M,e.listLoading]]),l(I,{dialogVisible:e.dialogVisible,onRefreshList:e.getList,memberId:this.memberId},null,8,["dialogVisible","onRefreshList","memberId"])])}const x=C(G,[["render",X]]);export{x as default};
