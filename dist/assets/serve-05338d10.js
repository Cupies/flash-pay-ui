import{c as h,a as B}from"./system-8407aca3.js";import{_ as v,r as p,m as i,o as k,b as C,e as n,g as l,a as r,q as f,x as g,k as z,N as A,c as S,s as U,t as w}from"./index-dd519aa6.js";const W={props:{dialogVisible:{type:Boolean,default:!1}},emits:["update:dialogVisible"],setup(o,{emit:e}){const m=p({mobile:"",password:"",storeId:0}),t=p(o.dialogVisible),u=a=>{e("update:dialogVisible",a)};return{form:m,syncDialogVisible:t,ensureDialog:async()=>{try{const a=await h(m.value);g({type:"success",message:"操作成功",duration:2e3}),u(!1)}catch{g({type:"error",message:"操作失败",duration:2e3})}},updateDialogVisible:u}}},q={slot:"footer",class:"dialog-footer"};function E(o,e,m,t,u,_){const a=i("el-input"),d=i("el-form-item"),b=i("el-form"),c=i("el-button"),V=i("el-dialog");return k(),C(V,{title:"新增成员",visible:t.syncDialogVisible},{default:n(()=>[l(b,{inline:!1},{default:n(()=>[l(d,{label:"手机号: ","label-width":o.formLabelWidth,rules:[{required:!0}]},{default:n(()=>[l(a,{modelValue:t.form.mobile,"onUpdate:modelValue":e[0]||(e[0]=s=>t.form.mobile=s)},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"密码: ","label-width":o.formLabelWidth},{default:n(()=>[l(a,{modelValue:t.form.password,"onUpdate:modelValue":e[1]||(e[1]=s=>t.form.password=s)},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"用户名: ","label-width":o.formLabelWidth},{default:n(()=>[l(a,{modelValue:t.form.username,"onUpdate:modelValue":e[2]||(e[2]=s=>t.form.username=s)},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"用户名: ","label-width":o.formLabelWidth},{default:n(()=>[l(a,{modelValue:t.form.username,"onUpdate:modelValue":e[3]||(e[3]=s=>t.form.username=s)},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1}),r("div",q,[l(c,{onClick:e[4]||(e[4]=s=>t.syncDialogVisible=!1)},{default:n(()=>[...e[5]||(e[5]=[f("取 消",-1)])]),_:1}),l(c,{type:"primary",onClick:t.ensureDialog},{default:n(()=>[...e[6]||(e[6]=[f("确 定",-1)])]),_:1},8,["onClick"])])]),_:1},8,["visible"])}const I=v(W,[["render",E]]);const M={name:"index",components:{addAdmin:I},setup(){const o=p([]),e=p(1),m=p(10),t=p(!1),u=async()=>{const d=await B(e.value,m.value);o.value=d.items},_=()=>{t.value=!0},a=async d=>{try{g({message:"删除成功",type:"info",duration:2e3})}catch{g({message:"删除失败",type:"error",duration:2e3})}};return z(()=>{u()}),{list:o,pageNo:e,pageSize:m,dialogVisible:t,getList:u,openSkuDialog:_,deleteClick:a}}},R={class:"data-container"},j={"slot-scope":"scope"},T={"slot-scope":"scope"},F={"slot-scope":"scope"},G={"slot-scope":"scope"};function H(o,e,m,t,u,_){const a=i("el-button"),d=i("el-row"),b=i("el-input"),c=i("el-form-item"),V=i("el-form"),s=i("el-table-column"),D=i("el-table"),L=i("addAdmin"),N=A("loading");return k(),S("div",R,[e[7]||(e[7]=r("h3",null,"门店管理",-1)),l(d,{type:"flex",justify:"end",class:"add"},{default:n(()=>[l(a,{type:"primary",size:"medium",onClick:t.openSkuDialog,id:"addBtn"},{default:n(()=>[...e[3]||(e[3]=[f("新增",-1)])]),_:1},8,["onClick"])]),_:1}),l(V,{inline:!0,size:"medium",class:"forms"},{default:n(()=>[l(c,{label:"账户/用户名:"},{default:n(()=>[l(b,{modelValue:o.skuName,"onUpdate:modelValue":e[0]||(e[0]=y=>o.skuName=y),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),l(c,null,{default:n(()=>[l(a,{type:"primary",onClick:o.searchSku,id:"searchBtn"},{default:n(()=>[...e[4]||(e[4]=[f("查询",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1}),U((k(),C(D,{data:t.list,fit:"","highlight-current-row":"","header-cell-style":{color:"#5373e0",background:"#f3f6fb"},style:{width:"100%"}},{default:n(()=>[l(s,{align:"center",label:"账号名称"},{default:n(()=>[r("template",j,[r("span",null,w(o.scope.row.username),1)])]),_:1}),l(s,{align:"center",label:"角色名称"},{default:n(()=>[r("template",T,[r("span",null,w(o.scope.row.roleName),1)])]),_:1}),l(s,{align:"center",label:"租户id"},{default:n(()=>[r("template",F,[r("span",null,w(o.scope.row.tenantId),1)])]),_:1}),l(s,{fixed:"right",label:"操作",width:"120",align:"center"},{default:n(()=>[r("template",G,[l(a,{onClick:e[1]||(e[1]=y=>o.updateClick(o.scope.row)),type:"text",size:"small"},{default:n(()=>[...e[5]||(e[5]=[f("编辑",-1)])]),_:1}),l(a,{onClick:e[2]||(e[2]=y=>o.delClick(o.scope.row)),type:"text",size:"small"},{default:n(()=>[...e[6]||(e[6]=[f("删除",-1)])]),_:1})])]),_:1})]),_:1},8,["data"])),[[N,o.listLoading]]),l(L,{dialogVisible:t.dialogVisible,onRefreshList:t.getList},null,8,["dialogVisible","onRefreshList"])])}const O=v(M,[["render",H]]);export{O as default};
