import{g as B,a as S,b as W}from"./firm-df08cf4c.js";import{_ as C,d as L,B as v,r as c,h as z,E as _,k as i,o as h,b as $,w as o,l as t,a as n,t as r,c as k,e as V,p as g,i as T,L as E,G as F}from"./index-c4ccb8e7.js";const O=L({name:"CreateTasks",props:{dialogVisible:{type:Boolean,default:!1},tenantId:{type:Number,required:!0}},emits:["update:dialogVisible","update:tenantId"],setup(e,{emit:l}){const m=v({get:()=>e.dialogVisible,set:s=>l("update:dialogVisible",s)}),u=v({get:()=>e.tenantId,set:s=>l("update:tenantId",s)}),f=c({storeAddress:"",storeName:"",storeNumber:0,parentId:0,storeStatus:"",merchantId:0}),d=c({});z(()=>e.dialogVisible,s=>{s&&a()});const a=async()=>{try{d.value=await B(u.value)}catch(s){console.error(s),_.error("获取商户信息失败")}};return{syncDialogVisible:m,tenantIds:u,form:f,list:d,getMsgFromMers:a,ensureDialog:()=>{m.value=!1}}}}),R={key:0},j={key:1},q={slot:"footer",class:"dialog-footer"};function A(e,l,m,u,f,d){const a=i("el-form-item"),b=i("el-form"),s=i("el-button"),p=i("el-dialog");return h(),$(p,{title:"基本信息",visible:e.syncDialogVisible,onOpen:e.open},{default:o(()=>[t(b,{inline:!1},{default:o(()=>[t(a,{label:"姓名: ","label-width":e.formLabelWidth},{default:o(()=>[n("span",null,r(e.list.fullName),1)]),_:1},8,["label-width"]),t(a,{label:"最后一次登录时间","label-width":e.formLabelWidth},{default:o(()=>[n("span",null,r(e.list.lastLoginTime),1)]),_:1},8,["label-width"]),t(a,{label:"手机号: ","label-width":e.formLabelWidth},{default:o(()=>[n("span",null,r(e.list.mobile),1)]),_:1},8,["label-width"]),t(a,{label:"职位	: ","label-width":e.formLabelWidth},{default:o(()=>[n("span",null,r(e.list.position),1)]),_:1},8,["label-width"]),t(a,{label:"用户名:","label-width":e.formLabelWidth},{default:o(()=>[n("span",null,r(e.list.username),1)]),_:1},8,["label-width"]),t(a,{label:"联系人地址: ","label-width":e.formLabelWidth},{default:o(()=>[e.list.staffStatus?(h(),k("span",R,"启用")):V("",!0),e.list.staffStatus?V("",!0):(h(),k("span",j,"禁用"))]),_:1},8,["label-width"]),t(a,{label:"密码: :","label-width":e.formLabelWidth},{default:o(()=>[n("span",null,r(e.list.password),1)]),_:1},8,["label-width"])]),_:1}),n("div",q,[t(s,{type:"primary",onClick:e.ensureDialog},{default:o(()=>[...l[0]||(l[0]=[g("确 定",-1)])]),_:1},8,["onClick"])])]),_:1},8,["visible","onOpen"])}const G=C(O,[["render",A]]);const U=L({name:"Member",components:{MemberDetail:G},setup(){const e=c([]),l=c(1),m=c(10),u=c(!1),f=c(0),d=async()=>{try{const s=await S(l.value,m.value);e.value=s.items}catch(s){console.error(s),_.error("获取成员信息失败")}},a=s=>{u.value=!0,f.value=s.id},b=async s=>{try{await W(s.id)?(_({message:"删除成功",type:"success",duration:2*1e3}),d()):_({message:"删除失败",type:"error",duration:2*1e3})}catch(p){console.error(p),_.error("删除成员失败")}};return T(()=>{d()}),{list:e,pageNo:l,pageSize:m,dialogVisible:u,memberId:f,getList:d,searchClick:a,delClick:b}}}),H={class:"data-container"},J={"slot-scope":"scope"},K={"slot-scope":"scope"},P={"slot-scope":"scope"},Q={"slot-scope":"scope"};function X(e,l,m,u,f,d){const a=i("el-button"),b=i("el-row"),s=i("el-input"),p=i("el-form-item"),D=i("el-form"),w=i("el-table-column"),I=i("el-table"),M=i("memberDetail"),N=E("loading");return h(),k("div",H,[l[7]||(l[7]=n("h3",null,"门店管理",-1)),t(b,{type:"flex",justify:"end",class:"add"},{default:o(()=>[t(a,{type:"primary",size:"medium",onClick:e.openSkuDialog,id:"addBtn"},{default:o(()=>[...l[3]||(l[3]=[g("新增",-1)])]),_:1},8,["onClick"])]),_:1}),t(D,{inline:!0,size:"medium",class:"forms"},{default:o(()=>[t(p,{label:"账户/用户名:"},{default:o(()=>[t(s,{modelValue:e.skuName,"onUpdate:modelValue":l[0]||(l[0]=y=>e.skuName=y),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),t(p,null,{default:o(()=>[t(a,{type:"primary",onClick:e.searchSku,id:"searchBtn"},{default:o(()=>[...l[4]||(l[4]=[g("查询",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1}),F((h(),$(I,{data:e.list,fit:"","highlight-current-row":"","header-cell-style":{color:"#5373e0",background:"#f3f6fb"},style:{width:"100%"}},{default:o(()=>[t(w,{align:"center",label:"手机号"},{default:o(()=>[n("template",J,[n("span",null,r(e.scope.row.mobile),1)])]),_:1}),t(w,{align:"center",label:"用户名"},{default:o(()=>[n("template",K,[n("span",null,r(e.scope.row.username),1)])]),_:1}),t(w,{align:"center",label:"最后一次登录时间"},{default:o(()=>[n("template",P,[n("span",null,r(e.scope.row.lastLoginTime),1)])]),_:1}),t(w,{fixed:"right",label:"操作",width:"120",align:"center"},{default:o(()=>[n("template",Q,[t(a,{onClick:l[1]||(l[1]=y=>e.searchClick(e.scope.row)),type:"text",size:"small"},{default:o(()=>[...l[5]||(l[5]=[g("查看",-1)])]),_:1}),t(a,{onClick:l[2]||(l[2]=y=>e.delClick(e.scope.row)),type:"text",size:"small"},{default:o(()=>[...l[6]||(l[6]=[g("删除",-1)])]),_:1})])]),_:1})]),_:1},8,["data"])),[[N,e.listLoading]]),t(M,{dialogVisible:e.dialogVisible,onRefreshList:e.getList,memberId:this.memberId},null,8,["dialogVisible","onRefreshList","memberId"])])}const x=C(U,[["render",X]]);export{x as default};
