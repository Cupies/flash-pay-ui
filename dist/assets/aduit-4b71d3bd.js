import{d as I}from"./organization-8a6699c2.js";import{g as B,O as k,s as W}from"./firm-df08cf4c.js";import{_ as L,d as $,B as V,r as y,h as M,E as o,k as u,o as C,b as N,w as s,l,a as n,t as m,p as w,i as j,L as z,c as S,G as A}from"./index-c4ccb8e7.js";const O=$({name:"CreateTasks",props:{dialogVisible:{type:Boolean,default:!1},tenantId:{type:Number,required:!0}},emits:["update:dialogVisible","update:tenantId"],setup(e,{emit:t}){const f=V({get:()=>e.dialogVisible,set:a=>t("update:dialogVisible",a)}),d=V({get:()=>e.tenantId,set:a=>t("update:tenantId",a)}),b=y({});M(()=>e.dialogVisible,a=>{a&&_()});const _=async()=>{try{b.value=await B(d.value)}catch(a){console.error(a),o.error("获取商户信息失败")}};return{syncDialogVisible:f,tenantIds:d,list:b,passClick:async()=>{try{await k(2,d.value)?(o({message:"通过成功",type:"success",duration:2*1e3}),f.value=!1):o({message:"通过失败",type:"error",duration:2*1e3})}catch(a){console.error(a),o.error("审核操作失败")}},rejectClick:async()=>{try{await k(3,d.value)?(o({message:"驳回成功",type:"success",duration:2*1e3}),f.value=!1):o({message:"驳回失败",type:"error",duration:2*1e3})}catch(a){console.error(a),o.error("审核操作失败")}},ensureDialog:()=>{f.value=!1}}}}),R={slot:"footer",class:"dialog-footer"};function T(e,t,f,d,b,_){const r=u("el-form-item"),g=u("el-form"),c=u("el-button"),a=u("el-dialog");return C(),N(a,{title:"基本信息",visible:e.syncDialogVisible,onOpen:e.open},{default:s(()=>[l(g,{inline:!1},{default:s(()=>[l(r,{label:"企业名称: ","label-width":e.formLabelWidth},{default:s(()=>[n("span",null,m(e.list.merchantName),1)]),_:1},8,["label-width"]),l(r,{label:"企业编号","label-width":e.formLabelWidth},{default:s(()=>[n("span",null,m(e.list.merchantNo),1)]),_:1},8,["label-width"]),l(r,{label:"企业地址: ","label-width":e.formLabelWidth},{default:s(()=>[n("span",null,m(e.list.merchantAddress),1)]),_:1},8,["label-width"]),l(r,{label:"行业类型	: ","label-width":e.formLabelWidth},{default:s(()=>[n("span",null,m(e.list.merchantType),1)]),_:1},8,["label-width"]),l(r,{label:"联系人:","label-width":e.formLabelWidth},{default:s(()=>[n("span",null,m(e.list.username),1)]),_:1},8,["label-width"]),l(r,{label:"联系人地址: ","label-width":e.formLabelWidth},{default:s(()=>[n("span",null,m(e.list.contactsAddress),1)]),_:1},8,["label-width"]),l(r,{label:"手机号:","label-width":e.formLabelWidth},{default:s(()=>[n("span",null,m(e.list.mobile),1)]),_:1},8,["label-width"])]),_:1}),n("div",R,[l(c,{type:"primary",onClick:e.passClick},{default:s(()=>[...t[0]||(t[0]=[w("通 过",-1)])]),_:1},8,["onClick"]),l(c,{type:"danger",onClick:e.rejectClick},{default:s(()=>[...t[1]||(t[1]=[w("驳 回",-1)])]),_:1},8,["onClick"])])]),_:1},8,["visible","onOpen"])}const E=L(O,[["render",T]]);const F=$({name:"Audit",components:{Detail:E},setup(){const e=y([]),t=y(1),f=y(10),d=y(!1),b=y(0),_=y({auditStatus:!1,merchantName:"",merchantType:"",mobile:""}),r=async()=>{try{const i=await W(_.value,t.value,f.value);e.value=i.items}catch(i){console.error(i),o.error("获取审核列表失败")}},g=i=>{b.value=i.id,d.value=!0},c=async i=>{try{await k(2,i.id)?(o({message:"通过成功",type:"success",duration:2*1e3}),d.value=!1,r()):o({message:"通过失败",type:"error",duration:2*1e3})}catch(p){console.error(p),o.error("审核操作失败")}},a=async i=>{try{await k(3,i.id)?(o({message:"驳回成功",type:"success",duration:2*1e3}),d.value=!1,r()):o({message:"驳回失败",type:"error",duration:2*1e3})}catch(p){console.error(p),o.error("审核操作失败")}},h=async i=>{try{await I(i.id)?(o({message:"删除成功",type:"success",duration:2*1e3}),r()):o({message:"删除失败",type:"error",duration:2*1e3})}catch(p){console.error(p),o.error("删除失败")}};return j(()=>{r()}),{list:e,pageNo:t,pageSize:f,dialogVisible:d,tenantId:b,form:_,getList:r,searchDetail:g,itPass:c,itReject:a,deleteClick:h}}}),P={class:"data-container"},q={"slot-scope":"scope"},G={"slot-scope":"scope"},U={"slot-scope":"scope"},H={"slot-scope":"scope"},J={"slot-scope":"scope"};function K(e,t,f,d,b,_){const r=u("el-input"),g=u("el-form-item"),c=u("el-button"),a=u("el-form"),h=u("el-table-column"),i=u("el-table"),p=u("detail"),D=z("loading");return C(),S("div",P,[t[8]||(t[8]=n("h3",null,"审核管理",-1)),l(a,{inline:!0,size:"medium",class:"forms"},{default:s(()=>[l(g,{label:"账户/用户名:"},{default:s(()=>[l(r,{modelValue:e.skuName,"onUpdate:modelValue":t[0]||(t[0]=v=>e.skuName=v),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),l(g,null,{default:s(()=>[l(c,{type:"primary",onClick:e.searchSku,id:"searchBtn"},{default:s(()=>[...t[4]||(t[4]=[w("查询",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1}),A((C(),N(i,{data:e.list,fit:"","highlight-current-row":"","header-cell-style":{color:"#5373e0",background:"#f3f6fb"},style:{width:"100%"}},{default:s(()=>[l(h,{align:"center",label:"企业编号"},{default:s(()=>[n("template",q,[n("span",null,m(e.scope.row.merchantNo),1)])]),_:1}),l(h,{align:"center",label:"企业名称"},{default:s(()=>[n("template",G,[n("span",null,m(e.scope.row.merchantName),1)])]),_:1}),l(h,{align:"center",label:"企业营业执照号"},{default:s(()=>[n("template",U,[n("span",null,m(e.scope.row.merchantNo),1)])]),_:1}),l(h,{fixed:"right",label:"操作",width:"120",align:"center"},{default:s(()=>[n("template",H,[l(c,{onClick:t[1]||(t[1]=v=>e.searchDetail(e.scope.row)),type:"text",size:"small"},{default:s(()=>[...t[5]||(t[5]=[w("查看",-1)])]),_:1})])]),_:1}),l(h,{fixed:"right",label:"操作",width:"120",align:"center"},{default:s(()=>[n("template",J,[l(c,{onClick:t[2]||(t[2]=v=>e.itPass(e.scope.row)),type:"text",size:"small"},{default:s(()=>[...t[6]||(t[6]=[w("通过",-1)])]),_:1}),l(c,{onClick:t[3]||(t[3]=v=>e.itReject(e.scope.row)),type:"text",size:"small"},{default:s(()=>[...t[7]||(t[7]=[w("驳回",-1)])]),_:1})])]),_:1})]),_:1},8,["data"])),[[D,e.listLoading]]),l(p,{dialogVisible:e.dialogVisible,onRefreshList:e.getList,tenantId:this.tenantId},null,8,["dialogVisible","onRefreshList","tenantId"])])}const Z=L(F,[["render",K]]);export{Z as default};
