import{_ as B,d as N,o as y,c as $,a as w,b as h,w as p,e as q,u as E,f as I,r as e,h as K,i as M,k as m,l as c,m as R,p as S,q as O,E as Q,g as U}from"./index-c4ccb8e7.js";const j=N({name:"Login",setup(){const o=E(),s=I(),t=e({usernames:"",password:""}),l=e("password"),d=e(!1),v=e(!1),u=e(""),a=e({}),f=e(!1),_=e(!1),i=e("获取验证码"),k=e("获取验证码"),V=e(!0),C=e(60),F=e(!0),T=e(60);K(()=>s,n=>{const r=n.query;r&&(u.value=r.redirect,a.value=x(r))},{immediate:!0,deep:!0}),M(()=>{});const b=()=>{l.value==="password"?l.value="":l.value="password"},L=async()=>{if(localStorage.setItem("username",t.value.usernames),localStorage.setItem("password",t.value.password),t.value.usernames===""||t.value.password===""){Q({message:"账号或密码不能为空",type:"error",duration:2*1e3});return}try{await U.operationLogin(t.value),o.push({path:"/",query:a.value}),setTimeout(()=>{d.value=!1},500)}catch(n){console.error(n),d.value=!1}},x=n=>Object.keys(n).reduce((r,g)=>(g!=="redirect"&&(r[g]=n[g]),r),{});return{loginForm:t,passwordType:l,loading:d,showDialog:v,redirect:u,otherQuery:a,flag:f,isRegistry:_,content:i,codes:k,canClick:V,totalTime:C,canClicks:F,totalTimes:T,showPwd:b,handleLogin:L}}}),D={class:"login-container"},P={class:"loginbox"},z={class:"rights"};function A(o,s,t,l,d,v){const u=m("el-input"),a=m("el-form-item"),f=m("el-button"),_=m("el-form");return y(),$("div",D,[w("div",P,[w("div",z,[s[3]||(s[3]=w("p",{class:"title"},"账户密码登录",-1)),o.flag?q("",!0):(y(),h(_,{key:0,ref:"loginForm",model:o.loginForm,class:"login-form",autocomplete:"on","label-position":"left"},{default:p(()=>[c(a,{prop:"username"},{default:p(()=>[c(u,{ref:"username",name:"username",modelValue:o.loginForm.usernames,"onUpdate:modelValue":s[0]||(s[0]=i=>o.loginForm.usernames=i),type:"text",autocomplete:"on",placeholder:"手机号/用户名"},null,8,["modelValue"])]),_:1}),c(a,{prop:"password"},{default:p(()=>[(y(),h(u,{key:o.passwordType,ref:"password",type:o.passwordType,modelValue:o.loginForm.password,"onUpdate:modelValue":s[1]||(s[1]=i=>o.loginForm.password=i),placeholder:"请输入密码",name:"password",autocomplete:"on",onKeyup:R(o.handleLogin,["enter","native"])},null,8,["type","modelValue","onKeyup"]))]),_:1}),c(f,{type:"primary",style:{width:"100%","margin-top":"24px",height:"56px"},onClick:O(o.handleLogin,["prevent"])},{default:p(()=>[...s[2]||(s[2]=[S(" 登录 ",-1)])]),_:1},8,["onClick"])]),_:1},8,["model"]))])])])}const H=B(j,[["render",A],["__scopeId","data-v-efe59e98"]]);export{H as default};
