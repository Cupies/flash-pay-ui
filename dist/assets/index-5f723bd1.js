import{_ as I,r as c,B as k,i as v,k as r,o as D,b as V,w as a,l as o,a as s,t as b,p as m,E as w,u as C,c as P}from"./index-c4ccb8e7.js";import{P as x}from"./index-06e87c0b.js";import{g as h,a as B}from"./pay-3a9900c7.js";const z={props:{dialogVisible:{type:Boolean,default:!1},appId:{type:String,required:!0}},emits:["update:dialogVisible","update:appId"],setup(l,{emit:e}){const f=c(1),t=c(10),u=c(0),_=c({}),n=k({get:()=>l.dialogVisible,set:d=>e("update:dialogVisible",d)}),g=k({get:()=>l.appId,set:d=>e("update:appId",d)});v(()=>{i()});const i=async()=>{};return{pageNo:f,pageSize:t,storeId:u,data:_,syncDialogVisible:n,appIds:g,opend:async()=>{try{const d=await h(l.appId);_.value=d}catch{w.error("参数获取失败")}},ensureDialog:()=>{n.value=!1}}}},N={slot:"footer",class:"dialog-footer"};function S(l,e,f,t,u,_){const n=r("el-form-item"),g=r("el-form"),i=r("el-button"),y=r("el-dialog");return D(),V(y,{visible:t.syncDialogVisible,onOpen:t.opend},{default:a(()=>[o(g,{inline:!1},{default:a(()=>[o(n,{label:"客户ID: "},{default:a(()=>[s("span",null,b(t.data.clientId),1)]),_:1}),o(n,{label:"客户端秘钥: "},{default:a(()=>[s("span",null,b(t.data.clientSecret),1)]),_:1}),o(n,{label:"闪聚平台公钥: "},{default:a(()=>[s("span",null,b(t.data.platformPublickey),1)]),_:1})]),_:1}),s("div",N,[o(i,{onClick:e[0]||(e[0]=p=>t.syncDialogVisible=!1)},{default:a(()=>[...e[1]||(e[1]=[m("取 消",-1)])]),_:1}),o(i,{type:"primary",onClick:t.ensureDialog},{default:a(()=>[...e[2]||(e[2]=[m("确 定",-1)])]),_:1},8,["onClick"])])]),_:1},8,["visible","onOpen"])}const T=I(z,[["render",S]]);const E={name:"manage",components:{Pagination:x,GetPayParams:T},setup(){const l=c(0),e=c([]),f=c(!1),t=c(""),u=C();v(()=>{_()});const _=async()=>{try{e.value=await B(),l.value=e.value.length}catch(p){w.error("获取应用列表失败"),console.error("API请求异常:",p)}};return{total:l,list:e,dialogVisible:f,appIds:t,getList:_,openTaskDialog:()=>{u.push({path:"/pay/set/0/0"})},handleClick:p=>{u.push({path:`/pay/set/${p.appId}/0`})},getDetail:p=>{f.value=!0,t.value=p.appId},setData:p=>{u.push({path:`/pay/set/${p.appId}/1`})}}}},L={class:"app-container"},$={"slot-scope":"scope"},A={"slot-scope":"scope"},M={"slot-scope":"scope"},O={"slot-scope":"scope"},j={"slot-scope":"scope"};function q(l,e,f,t,u,_){const n=r("el-button"),g=r("el-row"),i=r("el-table-column"),y=r("el-table"),p=r("getPayParams");return D(),P("div",L,[e[7]||(e[7]=s("h3",null,"我的支付",-1)),o(g,{type:"flex",justify:"end",class:"add"},{default:a(()=>[o(n,{type:"primary",size:"medium",onClick:t.openTaskDialog,id:"addBtn"},{default:a(()=>[...e[3]||(e[3]=[m("创建应用",-1)])]),_:1},8,["onClick"])]),_:1}),o(y,{style:{width:"100%"},data:t.list,"header-cell-style":{color:"#5373e0",background:"#f3f6fb"}},{default:a(()=>[o(i,{width:"center",align:"center",label:"应用ID"},{default:a(()=>[s("template",$,[s("span",null,b(l.scope.row.appId),1)])]),_:1}),o(i,{align:"center",label:"应用名称"},{default:a(()=>[s("template",A,[s("span",null,b(l.scope.row.appName),1)])]),_:1}),o(i,{align:"center",label:"应用公钥"},{default:a(()=>[s("template",M,[s("span",null,b(l.scope.row.publicKey),1)])]),_:1}),o(i,{fixed:"right",label:"获取支付参数",width:"150",align:"center"},{default:a(()=>[s("template",O,[o(n,{onClick:e[0]||(e[0]=d=>t.getDetail(l.scope.row)),type:"text",size:"small"},{default:a(()=>[...e[4]||(e[4]=[m("获取",-1)])]),_:1})])]),_:1}),o(i,{fixed:"right",label:"操作",width:"150",align:"center"},{default:a(()=>[s("template",j,[o(n,{onClick:e[1]||(e[1]=d=>t.handleClick(l.scope.row)),type:"text",size:"small"},{default:a(()=>[...e[5]||(e[5]=[m("编辑",-1)])]),_:1}),o(n,{onClick:e[2]||(e[2]=d=>t.setData(l.scope.row)),type:"text",size:"small"},{default:a(()=>[...e[6]||(e[6]=[m("配置",-1)])]),_:1})])]),_:1})]),_:1},8,["data"]),o(p,{dialogVisible:t.dialogVisible,appId:t.appIds},null,8,["dialogVisible","appId"])])}const F=I(E,[["render",q]]);export{F as default};
