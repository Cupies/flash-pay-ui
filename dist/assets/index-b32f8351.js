import{g as I,s as S,d as B}from"./firm-32e4afcf.js";import{_ as V,d as C,F as k,r as u,j as M,m as i,o as v,b as N,e as o,g as l,a as n,t as r,q as _,x as g,k as W,N as z,c as T,s as A}from"./index-dd519aa6.js";const F=C({name:"CreateTasks",props:{dialogVisible:{type:Boolean,default:!1},tenantId:{type:Number,required:!0}},emits:["update:dialogVisible","update:tenantId"],setup(e,{emit:t}){const m=k({get:()=>e.dialogVisible,set:s=>t("update:dialogVisible",s)}),c=k({get:()=>e.tenantId,set:s=>t("update:tenantId",s)}),b=u({storeAddress:"",storeName:"",storeNumber:0,parentId:0,storeStatus:"",merchantId:0}),p=u({}),a=()=>{d()},d=async()=>{try{p.value=await I(c.value)}catch(s){console.error(s),g.error("获取商户信息失败")}},f=()=>{m.value=!1};return M(()=>e.dialogVisible,s=>{s&&d()}),{syncDialogVisible:m,tenantIds:c,form:b,list:p,open:a,getMsgFromMers:d,ensureDialog:f}}}),j={slot:"footer",class:"dialog-footer"};function q(e,t,m,c,b,p){const a=i("el-form-item"),d=i("el-form"),f=i("el-button"),s=i("el-dialog");return v(),N(s,{title:"基本信息",visible:e.syncDialogVisible,onOpen:e.open},{default:o(()=>[l(d,{inline:!1},{default:o(()=>[l(a,{label:"企业名称: ","label-width":e.formLabelWidth},{default:o(()=>[n("span",null,r(e.list.merchantName),1)]),_:1},8,["label-width"]),l(a,{label:"企业编号","label-width":e.formLabelWidth},{default:o(()=>[n("span",null,r(e.list.merchantNo),1)]),_:1},8,["label-width"]),l(a,{label:"企业地址: ","label-width":e.formLabelWidth},{default:o(()=>[n("span",null,r(e.list.merchantAddress),1)]),_:1},8,["label-width"]),l(a,{label:"行业类型	: ","label-width":e.formLabelWidth},{default:o(()=>[n("span",null,r(e.list.merchantType),1)]),_:1},8,["label-width"]),l(a,{label:"联系人:","label-width":e.formLabelWidth},{default:o(()=>[n("span",null,r(e.list.username),1)]),_:1},8,["label-width"]),l(a,{label:"联系人地址: ","label-width":e.formLabelWidth},{default:o(()=>[n("span",null,r(e.list.contactsAddress),1)]),_:1},8,["label-width"]),l(a,{label:"手机号:","label-width":e.formLabelWidth},{default:o(()=>[n("span",null,r(e.list.mobile),1)]),_:1},8,["label-width"])]),_:1}),n("div",j,[l(f,{type:"primary",onClick:e.ensureDialog},{default:o(()=>[...t[0]||(t[0]=[_("确 定",-1)])]),_:1},8,["onClick"])])]),_:1},8,["visible","onOpen"])}const E=V(F,[["render",q]]);const O=C({name:"StoreList",components:{StoreDetail:E},setup(){const e=u([]),t=u(1),m=u(10),c=u(!1),b=u(0),p=u({auditStatus:!1,merchantName:"",merchantType:"",mobile:""}),a=async()=>{try{const s=await S(p.value,t.value,m.value);e.value=s.items,console.log(e.value)}catch(s){console.error(s),g.error("获取商户列表失败")}},d=s=>{c.value=!0,b.value=s.id},f=async s=>{try{await B(s.id)?(g({message:"删除成功",type:"success",duration:2*1e3}),a()):g({message:"删除失败",type:"error",duration:2*1e3})}catch(h){console.error(h),g.error("删除商户失败")}};return W(()=>{a()}),{list:e,pageNo:t,pageSize:m,dialogVisible:c,tenantId:b,form:p,getList:a,searchClick:d,deleteClick:f}}}),R={class:"data-container"},U={"slot-scope":"scope"},G={"slot-scope":"scope"},H={"slot-scope":"scope"},J={"slot-scope":"scope"};function K(e,t,m,c,b,p){const a=i("el-button"),d=i("el-row"),f=i("el-input"),s=i("el-form-item"),h=i("el-form"),w=i("el-table-column"),L=i("el-table"),$=i("storeDetail"),D=z("loading");return v(),T("div",R,[t[7]||(t[7]=n("h3",null,"企业管理",-1)),l(d,{type:"flex",justify:"end",class:"add"},{default:o(()=>[l(a,{type:"primary",size:"medium",onClick:e.openSkuDialog,id:"addBtn"},{default:o(()=>[...t[3]||(t[3]=[_("新增",-1)])]),_:1},8,["onClick"])]),_:1}),l(h,{inline:!0,size:"medium",class:"forms"},{default:o(()=>[l(s,{label:"账户/用户名:"},{default:o(()=>[l(f,{modelValue:e.skuName,"onUpdate:modelValue":t[0]||(t[0]=y=>e.skuName=y),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),l(s,null,{default:o(()=>[l(a,{type:"primary",onClick:e.searchSku,id:"searchBtn"},{default:o(()=>[...t[4]||(t[4]=[_("查询",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1}),A((v(),N(L,{data:e.list,fit:"","highlight-current-row":"","header-cell-style":{color:"#5373e0",background:"#f3f6fb"},style:{width:"100%"}},{default:o(()=>[l(w,{align:"center",label:"企业编号"},{default:o(()=>[n("template",U,[n("span",null,r(e.scope.row.merchantNo),1)])]),_:1}),l(w,{align:"center",label:"企业名称"},{default:o(()=>[n("template",G,[n("span",null,r(e.scope.row.merchantName),1)])]),_:1}),l(w,{align:"center",label:"企业营业执照号"},{default:o(()=>[n("template",H,[n("span",null,r(e.scope.row.merchantNo),1)])]),_:1}),l(w,{fixed:"right",label:"操作",width:"120",align:"center"},{default:o(()=>[n("template",J,[l(a,{onClick:t[1]||(t[1]=y=>e.searchClick(e.scope.row)),type:"text",size:"small"},{default:o(()=>[...t[5]||(t[5]=[_("查看",-1)])]),_:1}),l(a,{onClick:t[2]||(t[2]=y=>e.deleteClick(e.scope.row)),type:"text",size:"small"},{default:o(()=>[...t[6]||(t[6]=[_("删除",-1)])]),_:1})])]),_:1})]),_:1},8,["data"])),[[D,e.listLoading]]),l($,{dialogVisible:e.dialogVisible,onRefreshList:e.getList,tenantId:this.tenantId},null,8,["dialogVisible","onRefreshList","tenantId"])])}const X=V(O,[["render",K]]);export{X as default};
