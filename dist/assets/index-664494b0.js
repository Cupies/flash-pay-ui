import{g as I,s as B,d as S}from"./firm-df08cf4c.js";import{_ as V,d as C,B as k,r as u,h as M,k as i,o as v,b as L,w as o,l,a as n,t as r,p as _,E as g,i as W,L as z,c as T,G as A}from"./index-c4ccb8e7.js";const E=C({name:"CreateTasks",props:{dialogVisible:{type:Boolean,default:!1},tenantId:{type:Number,required:!0}},emits:["update:dialogVisible","update:tenantId"],setup(e,{emit:t}){const m=k({get:()=>e.dialogVisible,set:a=>t("update:dialogVisible",a)}),p=k({get:()=>e.tenantId,set:a=>t("update:tenantId",a)}),b=u({storeAddress:"",storeName:"",storeNumber:0,parentId:0,storeStatus:"",merchantId:0}),c=u({}),s=()=>{d()},d=async()=>{try{c.value=await I(p.value)}catch(a){console.error(a),g.error("获取商户信息失败")}},f=()=>{m.value=!1};return M(()=>e.dialogVisible,a=>{a&&d()}),{syncDialogVisible:m,tenantIds:p,form:b,list:c,open:s,getMsgFromMers:d,ensureDialog:f}}}),F={slot:"footer",class:"dialog-footer"};function O(e,t,m,p,b,c){const s=i("el-form-item"),d=i("el-form"),f=i("el-button"),a=i("el-dialog");return v(),L(a,{title:"基本信息",visible:e.syncDialogVisible,onOpen:e.open},{default:o(()=>[l(d,{inline:!1},{default:o(()=>[l(s,{label:"企业名称: ","label-width":e.formLabelWidth},{default:o(()=>[n("span",null,r(e.list.merchantName),1)]),_:1},8,["label-width"]),l(s,{label:"企业编号","label-width":e.formLabelWidth},{default:o(()=>[n("span",null,r(e.list.merchantNo),1)]),_:1},8,["label-width"]),l(s,{label:"企业地址: ","label-width":e.formLabelWidth},{default:o(()=>[n("span",null,r(e.list.merchantAddress),1)]),_:1},8,["label-width"]),l(s,{label:"行业类型	: ","label-width":e.formLabelWidth},{default:o(()=>[n("span",null,r(e.list.merchantType),1)]),_:1},8,["label-width"]),l(s,{label:"联系人:","label-width":e.formLabelWidth},{default:o(()=>[n("span",null,r(e.list.username),1)]),_:1},8,["label-width"]),l(s,{label:"联系人地址: ","label-width":e.formLabelWidth},{default:o(()=>[n("span",null,r(e.list.contactsAddress),1)]),_:1},8,["label-width"]),l(s,{label:"手机号:","label-width":e.formLabelWidth},{default:o(()=>[n("span",null,r(e.list.mobile),1)]),_:1},8,["label-width"])]),_:1}),n("div",F,[l(f,{type:"primary",onClick:e.ensureDialog},{default:o(()=>[...t[0]||(t[0]=[_("确 定",-1)])]),_:1},8,["onClick"])])]),_:1},8,["visible","onOpen"])}const R=V(E,[["render",O]]);const j=C({name:"StoreList",components:{StoreDetail:R},setup(){const e=u([]),t=u(1),m=u(10),p=u(!1),b=u(0),c=u({auditStatus:!1,merchantName:"",merchantType:"",mobile:""}),s=async()=>{try{const a=await B(c.value,t.value,m.value);e.value=a.items,console.log(e.value)}catch(a){console.error(a),g.error("获取商户列表失败")}},d=a=>{p.value=!0,b.value=a.id},f=async a=>{try{await S(a.id)?(g({message:"删除成功",type:"success",duration:2*1e3}),s()):g({message:"删除失败",type:"error",duration:2*1e3})}catch(h){console.error(h),g.error("删除商户失败")}};return W(()=>{s()}),{list:e,pageNo:t,pageSize:m,dialogVisible:p,tenantId:b,form:c,getList:s,searchClick:d,deleteClick:f}}}),q={class:"data-container"},G={"slot-scope":"scope"},U={"slot-scope":"scope"},H={"slot-scope":"scope"},J={"slot-scope":"scope"};function K(e,t,m,p,b,c){const s=i("el-button"),d=i("el-row"),f=i("el-input"),a=i("el-form-item"),h=i("el-form"),w=i("el-table-column"),N=i("el-table"),$=i("storeDetail"),D=z("loading");return v(),T("div",q,[t[7]||(t[7]=n("h3",null,"企业管理",-1)),l(d,{type:"flex",justify:"end",class:"add"},{default:o(()=>[l(s,{type:"primary",size:"medium",onClick:e.openSkuDialog,id:"addBtn"},{default:o(()=>[...t[3]||(t[3]=[_("新增",-1)])]),_:1},8,["onClick"])]),_:1}),l(h,{inline:!0,size:"medium",class:"forms"},{default:o(()=>[l(a,{label:"账户/用户名:"},{default:o(()=>[l(f,{modelValue:e.skuName,"onUpdate:modelValue":t[0]||(t[0]=y=>e.skuName=y),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),l(a,null,{default:o(()=>[l(s,{type:"primary",onClick:e.searchSku,id:"searchBtn"},{default:o(()=>[...t[4]||(t[4]=[_("查询",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1}),A((v(),L(N,{data:e.list,fit:"","highlight-current-row":"","header-cell-style":{color:"#5373e0",background:"#f3f6fb"},style:{width:"100%"}},{default:o(()=>[l(w,{align:"center",label:"企业编号"},{default:o(()=>[n("template",G,[n("span",null,r(e.scope.row.merchantNo),1)])]),_:1}),l(w,{align:"center",label:"企业名称"},{default:o(()=>[n("template",U,[n("span",null,r(e.scope.row.merchantName),1)])]),_:1}),l(w,{align:"center",label:"企业营业执照号"},{default:o(()=>[n("template",H,[n("span",null,r(e.scope.row.merchantNo),1)])]),_:1}),l(w,{fixed:"right",label:"操作",width:"120",align:"center"},{default:o(()=>[n("template",J,[l(s,{onClick:t[1]||(t[1]=y=>e.searchClick(e.scope.row)),type:"text",size:"small"},{default:o(()=>[...t[5]||(t[5]=[_("查看",-1)])]),_:1}),l(s,{onClick:t[2]||(t[2]=y=>e.deleteClick(e.scope.row)),type:"text",size:"small"},{default:o(()=>[...t[6]||(t[6]=[_("删除",-1)])]),_:1})])]),_:1})]),_:1},8,["data"])),[[D,e.listLoading]]),l($,{dialogVisible:e.dialogVisible,onRefreshList:e.getList,tenantId:this.tenantId},null,8,["dialogVisible","onRefreshList","tenantId"])])}const X=V(j,[["render",K]]);export{X as default};
